---
layout: post
mathjax: true
title: 【置顶】考试细节
date: 9999-12-31-00:00:00
category: 总结
---
* content
{:toc}
# 引言

　　最近总是在实现和调试上犯一些低级错误，在这里总结一下经验，为平时训练和实际考试做一些Tips和警示



# 常规细节

* 审题，不管题有多难、不想做，至少读两遍，结合样例看题，确保自己理解对题意；有异议的地方确认题目不清楚后要提问

  常见漏看点有：

  * 单向边还是双向边
  * 图是否连通
  * 输入的每个数字是整数还是实数。因为最近很少做带实数的题，所以我现在每次看题几乎都会默认输入的数据是整数，这点非常致命，特别是遇到某些经典模型的变种时，要多加小心，不可以臆想（如最小生成树的小数版本）
  * 输入某些元素的顺序（如边）
  * 输入的是正整数还是整数？
  * 在某些模型上额外规定的条件（如统计DAG源点到汇点路径条数、而题目规定单点不算），千万别还没看到就高兴地去写题了

* 每想出一个做法，请**打开题面，对着【数据范围】计算复杂度**，不要想当然地使用印象中的数据范围，很有可能发生混淆

* 搞清楚题目的计算过程和最终答案是否过大，决定是否使用long long存储。实现时需要谨慎考虑新声明的每一个变量是否会记录大数。静态查错时注意每一个变量的用途与类型是否相符

* 定义模数常量时，请**打开题面，对着模数抄或复制**。实现时不可走神，确认每一步是否要取模。静态查错时注意每一次关键计算是否已经取模。输出时注意判掉负数

* 定义无穷大常量时，注意这个常量是否能满足题目的需求，最好计算出极端情况确认一下。再者，考虑使用时是否会遇到两个值为无穷大的变量相加的情况，谨防爆int，有需要开long long，条件允许时将最大值减小一倍（如DP时要对两者之和取$\min$，结果两个人都是2e9，加起来会直接爆掉，不影响题目的前提下，无穷大定义为1e9即可）

* 定义数组时，千万注意范围！有时候数组空间消耗的确是$O(n)$，但是实际消耗是几倍（如$O(n)$的网格图走法计数会用到${2n\choose n}$，因此预处理阶乘要用到$2n$）。配合对拍查错

* 注意$n$和$m$的**具体意义**，以及调用时**具体是谁**。每一次写下这一些全局变量时，都要谨慎，因为踩过太多次坑了，网格图、意义混淆（考前模拟赛，哈希应该预处理到字符串长度$m$，结果预处理到了人数$n$），最好背一背......

* 预处理数组，如无特别影响，预处理的范围最好是题目中可能的最大范围，实时输入范围预处理可能会导致意想不到的结果（如范围打混）

* 记得开-Wall检验一下低级错误

* 部分分程序写完后，不可擅自改大常量以适应更大的数据，有可能直接爆空间。要确认修改是否保险再实操

# 对拍和检验

* 静态查错。注意观察主参数、某一些边界、初始化过程及其对象。这一步必须认真做，不可敷衍，不能看到某一个地方写了什么就草草略过了，这样检查多少遍都不会有结果；应该联系相关过程，仔细确定这个变量用在这里是否符合我们的设想
* 反复确认数组边界，除了保证其和理论设计相符，一定要用一组极限大数据测试是否RE，最好实时计算一下最大使用范围
* 即使数据范围较小，也不能忽略或轻视卡常带来的风险，用一些极限数据和部分分给出的特殊数据（深搜跑一条链、度数相关算法跑菊花树等），结合数据范围确定是否需要进一步优化
* 程序如果有多个分类模块，一定要对每一个模块分别构造数据进行测试，以防出现某一个特判模块写错，却因为造出的测试数据鲜有特殊情况而导致该错误不能被呈现（无法对拍的题目特别要注意）
* 生成数据时，主参数最好不要固定。在符合题目条件的情况下，主参数应该有波动和相对大小的变化，这样可以拍出主参数记错、打反、打混的情况（已经死在这上面很多次了，考前模拟赛又来）
* 构造的数据要尽可能地覆盖题目所给出的所有情况，不要因为图快、方便或忘记而导致生成的数据覆盖的情况不全，如题目输入含有正负数，而生成器只生成了正数

# 算法和数据结构

## 线段树

* 主席树的空间开$N*(\log N+2)$都非常不保险，很有可能会爆掉，千万注意（死在上面几次了）。最好自己手造一组极限数据，测试使用总点数
* 存在标记时，在常数允许情况下，什么递归操作都最好执行一下下推和上推

## Tarjan

* 强连通分量的处理位置在DFS尾部；点双的处理位置在递归DFS之后；边双的处理位置在DFS尾部
* 弹栈时注意设置入栈标记为false
* 建圆方树时，深搜完毕后栈内可能还会残余一个点，记得清空

## Floyd

* $f_{i,k}+f_{k,j}\rightarrow f_{i,j}$，$k$在最外层循环

## 匈牙利

* $vis$布尔数组是用来记录另一端的点的访问的
* 清空$vis$时注意范围为$2n$而不是$n$

## 网络流

* 建边之前注意设置边总数为1，确保反向边能用异或表示
* 广搜或SPFA前清空时注意点的标号范围
* 多路增广费用流的DFS部分，需要额外判定去向点是否不在深搜栈内，否则可能会导致死循环
* 在空间允许的情况下，点和边的数组尽量开到最大，因为有时候精准计算点数边数是一件很难的事情

## 插头DP

* 每处理完一行以后，记得整体向左偏移一位
* 注意在什么位置才能统计答案，不一定是右下角，而可能是最底行的最后一个非障碍位置

## 基环树

* $n$点$n$边，不一定是单个基环树，可能是基环树森林，注意分开处理
* 注意自环
* 树上深搜时，保证除了根以外，经过的点都不是环上的点即可

## FFT

* 看清楚枚举的$i$是二进制位数还是$2^i$，调用时用的是$i$还是$1$<<$i$
* 最好预处理复数根和原根
* 打完FFT后，检验一下正确性：对一个数组FFT再逆FFT试验一下，看结果是否与原来相等

## 图论题

* **注意多连通块的处理！**考虑多连通块是否对答案有影响，不要想当然以为题题都是单连通块

## PAM

* 注意将PAM中记录字符串的数组下标为零处设为特殊字符，不然$'a'-0=0$可能和零处相等
* 新建一个节点时，要先计算它的fail，再将其接在父节点上，否则可能导致死循环

## SAM

* **别忘了空间要开两倍！**
* 向前迭代时，判断条件为$p \neq 0$而不是$p \neq rt$
* 注意复制的对象

## 广义SAM

* 普通版：插入一个串后，令$last=1$即可复位
* $\text{Trie}$版：扩展当前点时，将父节点对应的SAM节点传入expand作为$p$

## 替罪羊树

* 对于一段不平衡的祖先链，应在链顶处重构

## Splay

* Splay前记得暴力下传标记
* Splay完成后注意更新根节点

## 插头DP

* 注意控制闭合事件的发生时刻

