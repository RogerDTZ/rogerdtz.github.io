---
layout: post
mathjax: true
title: 表达式求值
date: 2018-10-15 21:20:00
tag: [表达式求值]
category: Learning
---
# 模型描述

　　给定一个由一下元素构成的表达式：

* 数字或变量
* 具有规定优先级的若干种运算符
* 括号

　　规定：

1. 优先计算括号内部的内容
2. 其次，优先计算优先级更高的运算符

　　现在，请求解整个表达式的值。



# 后缀表达式

　　上述提到的表达式属于中序表达式，其简洁美观，利于阅读和计算，却不利于计算机的模拟，可想而知计算一个中序表达式的模拟过程有多繁琐

　　但是如果我们能够将该中序表达式转化为等价的后缀表达式，其计算过程在实现难度上将大大降低。转化之后，各种运算符与括号之间的优先级都暗暗体现在后缀表达式中，计算起来极为方便，只需要一个栈进行线性模拟即可

　　现在，考虑将一个中序表达式转化为等价的后缀表达式

# 转化

　　整体过程可以如下描述，其中使用了一个栈$S$用以记录运算符与左括号：

　　从左到右枚举中序表达式的每一个元素：

1. 若该元素是一个数字或变量，我们直接将其添加到当前后缀表达式的末尾
2. 若该元素是一个括号：
	1. 如果是左括号：我们将其压入$S$中
	2. 如果是右括号：我们不断将$S$栈顶的运算符弹出，并将其添加到后缀表达式的末尾，直到弹出一个左括号为止。特别地，我们不将左括号添加进后缀表达式中
3. 若该元素是一个运算符：
	1. 若栈$S$为空，或当前运算符的优先级高于$S$栈顶运算符，或栈顶为左括号，则直接将该运算符压入$S$中
	2. 否则，将栈顶运算符弹出，并将其添加到后缀表达式的末尾。重复此步骤直到3.1满足为止，并执行3.1

　　

　　至此，我们在$O(n)$的时间内，将一个中序表达式转化为了一个与其等价的后缀表达式。接下来的后缀表达式求解过程十分简单，在此不<!-- more -->再详述