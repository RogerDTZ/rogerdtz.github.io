---
layout: post
title: 链上求和
date: 2018-01-13
mathjax: true
---
![img](http://192.168.102.138/JudgeOnline/upload/attachment/image/20170301/20170301145615_67127.png)

![img](http://192.168.102.138/JudgeOnline/upload/attachment/image/20170301/20170301145631_36414.png)


<!-- more -->
# Solution

​	对于每一条链，如果把权值从大到小拿出来排个序，记为$a_1,a_2...a_n$ ，那么这条链对答案的贡献为：$\sum_{i=1}^n\sum_{j=1}^ia_j=\sum_{i=1}^n a_i*(n-i+1)$。每一个值$a$，被计算的次数等于小于$a$的数的数量加1。

​	由于每个点贡献次数和路径上权值小于它的节点有关，现在对所有点按照权值由小到大排序，一个一个地加入并计算每一个点$x$在树中所有链中的贡献次数$time$，对答案的贡献即$a_x*time$。

​	考虑经过$x$的路径